<!DOCTYPE html>
<html>

<head>

  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="generator" content="MarkBind 2.14.1">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>CS2030 AY19/20 Semester 2</title>
  <link rel="stylesheet" href="../../../../markbind/css/bootstrap.min.css">
  <link rel="stylesheet" href="../../../../markbind/css/bootstrap-vue.min.css">
  <link rel="stylesheet" href="../../../../markbind/fontawesome/css/all.min.css">
  <link rel="stylesheet" href="../../../../markbind/glyphicons/css/bootstrap-glyphicons.min.css">
  <link rel="stylesheet" href="../../../../markbind/css/octicons.css">
  <link rel="stylesheet" href="../../../../markbind/css/github.min.css">
  <link rel="stylesheet" href="../../../../markbind/css/markbind.css">
  <link rel="stylesheet" href="/1920-s2/plugins/markbind-plugin-anchors/markbind-plugin-anchors.css">
  <link rel="stylesheet" href="../../../../markbind/layouts/default/styles.css">
  <link rel="stylesheet" href="../../../../markbind/css/page-nav.css">
</head>

<body data-spy="scroll" data-target="#page-nav" data-offset="100">
  <div id="app">
    <header>
      <navbar type="dark" class="temp-navbar">
        <a slot="brand" href="/1920-s2/index.html" title="Home" class="navbar-brand">CS2030 AY19/20 Semester 2</a>
        <div class="nav-link temp-dropdown-placeholder">Peer Learning</div>
        <dropdown class="nav-link temp-dropdown"><template slot="_header">Peer Learning</template>
          <li><a href="/1920-s2/contents/peerlearning/peerlearning.html" class="dropdown-item">Introduction</a></li>
          <li><a href="/1920-s2/contents/peerlearning/textbook.html" class="dropdown-item">Textbook Contributions</a></li>
          <li><a href="/1920-s2/contents/peerlearning/peerlearningtask.html" class="dropdown-item">Peer Learning Tasks</a></li>
          <li><a href="/1920-s2/contents/peerlearning/piazza.html" class="dropdown-item">Piazza Participation</a></li>
        </dropdown>
        <div class="nav-link temp-dropdown-placeholder">Guides</div>
        <dropdown class="nav-link temp-dropdown"><template slot="_header">Guides</template>
          <li><a href="/1920-s2/contents/guides/settingUpLabEnv.html" class="dropdown-item">Setting Up Lab Environment</a></li>
          <li><a href="/1920-s2/contents/guides/settingUpJava.html" class="dropdown-item">Setting Up Java</a></li>
          <li><a href="/1920-s2/contents/guides/settingUpVim.html" class="dropdown-item">Setting Up Vim</a></li>
          <li><a href="/1920-s2/contents/guides/settingUpMacVim.html" class="dropdown-item">Setting Up MacVim</a></li>
          <li><a href="/1920-s2/contents/guides/sunfireLabs.html" class="dropdown-item">Setting Up Sunfire and PE Nodes</a></li>
          <li><a href="/1920-s2/contents/guides/settingUpCheckstyle.html" class="dropdown-item">Setting Up Checkstyle</a></li>
        </dropdown>
        <li><a slot="brand" href="/1920-s2/contents/textbook/textbook.html" class="nav-link">Textbook</a></li>
        <div class="nav-link temp-dropdown-placeholder">Links</div>
        <dropdown class="nav-link temp-dropdown"><template slot="_header">Links</template>
          <li><a href="https://www.comp.nus.edu.sg/~cs2030/style/" class="dropdown-item" target="_blank">CS2030 Java Style Guide</a></li>
          <li><a href="https://www.comp.nus.edu.sg/~cs2030/javadoc/" class="dropdown-item" target="_blank">CS2030 Javadoc Specification</a></li>
          <li><a href="https://www.oracle.com/technetwork/java/javase/downloads/jdk11-downloads-5066655.html" class="dropdown-item" target="_blank">JDK 11 Download Link</a></li>
          <li><a href="https://codecrunch.comp.nus.edu.sg/" class="dropdown-item" target="_blank">Codecrunch</a></li>
          <li><a href="https://github.com/nus-cs2030/1920-s2" class="dropdown-item" target="_blank">Github Repo</a></li>
          <li><a href="https://piazza.com/class/k54zo22zq1t2zc" class="dropdown-item" target="_blank">Piazza Forum</a></li>
        </dropdown>
        <li slot="right">
          <form class="navbar-form">
            <searchbar :data="searchData" placeholder="Search" :on-hit="searchCallback" menu-align-right></searchbar>
          </form>
        </li>
      </navbar>
    </header>
    <div id="flex-body">

      <div id="content-wrapper">
        <br>
        <h1 id="do-you-want-to-build-a-monad">Do you want to build a monad?<a class="fa fa-anchor" href="#do-you-want-to-build-a-monad" onclick="event.stopPropagation()"></a></h1>
        <hr>

        <p><a href="https://github.com/nus-cs2030/1920-s2/edit/master/contents/textbook/lecture10/monadsIntro/extraMonads.md">Edit the material here! <span aria-hidden="true" class="fas fa-pen"></span></a></p>

        <h2 id="supplementary-materials-about-pure-functions">Supplementary materials about pure functions<a class="fa fa-anchor" href="#supplementary-materials-about-pure-functions" onclick="event.stopPropagation()"></a></h2>
        <p>A function is called a pure function if it always returns the same result for same argument values and it has no side effects like modifying an argument (or global variable) or outputting something. The only result of calling a pure function is the return value.</p>
        <p>Examples of side effects:</p>
        <ol>
          <li>
            <p>Program input and output</p>
          </li>
          <li>
            <p>Throwing exceptions</p>
          </li>
          <li>
            <p>Modifying external state</p>
          </li>
        </ol>
        <h4 id="examples-of-impure-functions">Examples of impure functions<a class="fa fa-anchor" href="#examples-of-impure-functions" onclick="event.stopPropagation()"></a></h4>
        <pre><code class="hljs java"><span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">calculate</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x, <span class="hljs-keyword">int</span> y)</span> </span>{<br></span><span>    <span class="hljs-keyword">return</span> x / y;<br></span><span>}<br></span></code></pre>
        <p>Explanation: x / y may throw an java.lang.ArithmeticException when y = 0, thus this can cause side effects(point 2 in side effect list)</p>
        <pre><code class="hljs"><span>int foo(int i) {<br></span><span>    return this.count + i;<br></span><span>}<br></span></code></pre>
        <p>Explanation: the program makes use of this.count, which is a field of the class, thus the return value of the method does not always return the same result for same argument values. It might varies with different this.count value and thus it does not have a deterministic value.</p>
        <pre><code class="hljs java"><span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">addToQueue</span><span class="hljs-params">(List&lt;Integer&gt; queue, <span class="hljs-keyword">int</span> i)</span> </span>{<br></span><span>    queue.add(i);<br></span><span>}<br></span></code></pre>
        <p>Explanation: this method changes the external state, it modifies the queue by adding in new values to queue, which is a list of Integer.</p>
        <h4 id="example-of-pure-function">Example of pure function<a class="fa fa-anchor" href="#example-of-pure-function" onclick="event.stopPropagation()"></a></h4>
        <pre><code class="hljs java"><span><span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">p</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x, <span class="hljs-keyword">int</span> y)</span> </span>{<br></span><span>    <span class="hljs-keyword">return</span> x + y;<br></span><span>}<br></span></code></pre>
        <p>Explanation: this method does not have program input and output, it does not throw exceptions, and it does not modify external state. Thus it does have side effects. It always returns the same result for same argument values, thus it is considered as a pure function</p>
        <h2 id="supplementary-materials-about-functor">Supplementary materials about Functor<a class="fa fa-anchor" href="#supplementary-materials-about-functor" onclick="event.stopPropagation()"></a></h2>
        <p>In functional programming, it is common to map objects and types to another type. One safe way of doing it is putting this object, stream, or data structure in a well-protected container which allows us to execute mapping operations with functions. Here is where Functors comes in.</p>
        <p>Common examples of Functors which have been covered in CS2030 is Optional/InfiniteList. They have methods of the form: &lt; R &gt; Functor&lt; R &gt; map(Function&lt; T, R &gt; func)</p>
        <p>Here is a simple implementation of a functor</p>
        <pre><code class="hljs java"><span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">FunctorExample</span> </span>{<br></span><span>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">double</span> num;<br></span><span><br></span><span>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">FunctorExample</span><span class="hljs-params">(<span class="hljs-keyword">double</span> num)</span> </span>{<br></span><span>        <span class="hljs-keyword">this</span>.num = num;<br></span><span>    }<br></span><span><br></span><span>    <span class="hljs-function"><span class="hljs-keyword">public</span> FunctorExample <span class="hljs-title">map</span><span class="hljs-params">(Function&lt; Double, Double &gt; func)</span> </span>{<br></span><span>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> FunctorExample(func.apply(num));<br></span><span>    }<br></span><span><br></span><span>    <span class="hljs-meta">@Override</span><br></span><span>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">equals</span><span class="hljs-params">(Object o)</span> </span>{<br></span><span>        <span class="hljs-keyword">if</span> (o == <span class="hljs-keyword">this</span>) {<br></span><span>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;<br></span><span>        } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (o <span class="hljs-keyword">instanceof</span> FunctorExample) {<br></span><span>            FunctorExample temp = (FunctorExample) o;<br></span><span>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.num == temp.num;<br></span><span>        } <span class="hljs-keyword">else</span> {<br></span><span>            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;<br></span><span>        }<br></span><span>    }<br></span><span>}<br></span></code></pre>
        <p>A functor must obey the following two functor laws</p>
        <ol>
          <li>
            <p>Identity: if func is an identity function(such as x -&gt; x), then it should not change the value of the functor.</p>
          </li>
          <li>
            <p>Associative: if func is a composition of two functions(such as g ⋅ h), then the resulting functor should be the same as calling func with h and then with g.</p>
          </li>
        </ol>
        <p>Referring to the previous example, let us check if it obeys the functor laws.</p>
        <pre><code class="hljs java"><span>FunctorExample fe = <span class="hljs-keyword">new</span> FunctorExample(<span class="hljs-number">1.0</span>)<br></span><span>fe.equals(fe.map(x -&gt; x)); <span class="hljs-comment">// check Identity Law</span><br></span><span>fe.map(x -&gt; x + <span class="hljs-number">2.0</span>).map(x -&gt; x * <span class="hljs-number">3.0</span>).equals(fe.map(x -&gt; (x + <span class="hljs-number">2.0</span>) * <span class="hljs-number">3.0</span>)); <span class="hljs-comment">// check Associative Law</span><br></span></code></pre>
        <p>The result for the second line of code is true, and the result for the third line of code is true as well. Thus we can confirm that the above implementation is a functor because it obeys the two laws mentioned above</p>
        <h2 id="how-to-build-a-monad">How to build a monad<a class="fa fa-anchor" href="#how-to-build-a-monad" onclick="event.stopPropagation()"></a></h2>
        <p>This post was adapted from <a href="https://nus-cs2030.github.io/1718-s2/monad/index.html">Prof Ooi's CS2030 Website</a></p>
        <p>This post was inspired by <a href="https://blog.jcoglan.com/2011/03/05/translation-from-haskell-to-javascript-of-selected-portions-of-the-best-introduction-to-monads-ive-ever-read/">The Best Introduction to Monad</a>, but is adapted to the Object-Oritented way of programming with Java.</p>
        <p>For a visual introduction to functors and monads, check <a href="http://adit.io/posts/2013-04-17-functors,_applicatives,_and_monads_in_pictures.html">this</a> out!</p>
        <p>Let's say we have:</p>
        <pre><code class="hljs java"><span><span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">sin</span><span class="hljs-params">(<span class="hljs-keyword">double</span> x)</span> </span>{<br></span><span>  <span class="hljs-keyword">return</span> Math.sin(x);<br></span><span>}<br></span><span><br></span><span><span class="hljs-function"><span class="hljs-keyword">double</span> <span class="hljs-title">cube</span><span class="hljs-params">(<span class="hljs-keyword">double</span> x)</span> </span>{<br></span><span>  <span class="hljs-keyword">return</span> x * x * x;<br></span><span>}<br></span></code></pre>
        <p>We can easily chain the methods together:</p>
        <pre><code class="hljs"><span>sin(cube(5.0));<br></span><span>cube(sin(5.0));<br></span></code></pre>
        <p>But, what if we need to print something while doing this operation? We can easily do:</p>
        <pre><code class="hljs"><span>double sin(double x) {<br></span><span>  System.out.println(&quot;called sin&quot;);<br></span><span>  return Math.sin(x);<br></span><span>}<br></span><span><br></span><span>double cube(double x) {<br></span><span>  System.out.println(&quot;called cubed&quot;);<br></span><span>  return x*x*x;<br></span><span>}<br></span></code></pre>
        <p>But that has side effects, so it <strong>violates the spirit of functional programming</strong>. We should concat the logs into a string.
          So we need a class that encapsulates the variable with its log.</p>
        <pre><code class="hljs java"><span><br></span><span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DoubleString</span> </span>{<br></span><span>  Double x;<br></span><span>  String log;<br></span><span><br></span><span>  DoubleString(<span class="hljs-keyword">double</span> x, String log) {<br></span><span>    <span class="hljs-keyword">this</span>.x = x;<br></span><span>    <span class="hljs-keyword">this</span>.log = log;<br></span><span>  }<br></span><span>}<br></span></code></pre>
        <p>Now, we can write the methods as:</p>
        <pre><code class="hljs"><span>DoubleString sinAndLog(double x) {<br></span><span>  return new DoubleString(sin(x), &quot;called sin&quot;);<br></span><span>}<br></span><span><br></span><span>DoubleString cubeAndLog(double x) {<br></span><span>  return new DoubleString(cube(x), &quot;called cube&quot;);<br></span><span>}<br></span></code></pre>
        <p>In a way, we are writing methods that take in a value <code>(double x)</code> and add some context to it (the log). We wrap both the value and its context in a box (the <code>DoubleString</code>). But these new functions <strong>do not compose</strong> anymore. We cannot do <code>sinAndLog(cubeAndLog(x))</code></p>
        <p>We need methods that takes in a <code>DoubleString</code> and return a <code>DoubleString</code></p>
        <p>Great! Now we can write the methods to compose them:</p>
        <pre><code class="hljs java"><span>sinAndLog(cubeAndLog(<span class="hljs-keyword">new</span> DoubleString(<span class="hljs-number">5.0</span>,<span class="hljs-string">""</span>)));<br></span></code></pre>
        <p>or in the <strong>Object-Oriented Way:</strong></p>
        <pre><code class="hljs java"><span>  Double x;<br></span><span>  String log;<br></span><span><br></span><span>  DoubleString(<span class="hljs-keyword">double</span> x, String log) {<br></span><span>    <span class="hljs-keyword">this</span>.x = x;<br></span><span>    <span class="hljs-keyword">this</span>.log = log;<br></span><span>  }<br></span><span><br></span><span>  <span class="hljs-function">DoubleString <span class="hljs-title">sinAndLog</span><span class="hljs-params">()</span> </span>{<br></span><span>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> DoubleString(sin(<span class="hljs-keyword">this</span>.x), log + <span class="hljs-string">"called sin"</span>);<br></span><span>  }<br></span><span><br></span><span>  <span class="hljs-function">DoubleString <span class="hljs-title">cubeAndLog</span><span class="hljs-params">()</span> </span>{<br></span><span>    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> DoubleString(cube(<span class="hljs-keyword">this</span>.x), log + <span class="hljs-string">"called cube"</span>);<br></span><span>  }<br></span><span>}<br></span></code></pre>
        <p>In the <strong>Object-Oriented Way</strong>, we chain the methods together.</p>
        <pre><code class="hljs"><span>new DoubleString(5.0, &quot;&quot;).sinAndLog().cubeAndLog();<br></span></code></pre>
        <p>So, how do we actually make it a monad? To find out more, <a href="/1920-s2/contents/textbook/lecture10/monadsIntro/makingTheMonad.html">click here!</a></p>
      </div>


      <nav id="page-nav" class="navbar navbar-light bg-transparent">
        <div class="border-left-grey nav-inner position-sticky slim-scroll">

          <nav class="nav nav-pills flex-column my-0 small no-flex-wrap">
            <a class="nav-link py-1" href="#do-you-want-to-build-a-monad">Do you want to build a monad?&#x200E;</a>
            <nav class="nav nav-pills flex-column my-0 nested no-flex-wrap">
              <a class="nav-link py-1" href="#supplementary-materials-about-pure-functions">Supplementary materials about pure functions&#x200E;</a>
              <a class="nav-link py-1" href="#supplementary-materials-about-functor">Supplementary materials about Functor&#x200E;</a>
              <a class="nav-link py-1" href="#how-to-build-a-monad">How to build a monad&#x200E;</a>
            </nav>

          </nav>
        </div>
      </nav>
    </div>
    <footer>

      <div class="text-center">
        <small>Generated by <a href="https://markbind.org/">MarkBind 2.14.1</a> on Mon, May 11, 2020, 1:16:21 AM UTC</small></div>
    </footer>
  </div>
</body>
<script src="../../../../markbind/js/vue.min.js"></script>
<script src="../../../../markbind/js/vue-strap.min.js"></script>
<script src="../../../../markbind/js/bootstrap-utility.min.js"></script>
<script src="../../../../markbind/js/polyfill.min.js"></script>
<script src="../../../../markbind/js/bootstrap-vue.min.js"></script>
<script>
  const baseUrl = '/1920-s2'
  const enableSearch = true
</script>
<script src="../../../../markbind/js/setup.js"></script>
<script src="../../../../markbind/layouts/default/scripts.js"></script>

</html>